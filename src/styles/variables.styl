/* utils */
white(a)
  rgba(255, 255, 255, a)

black(a)
  rgba(0, 0, 0, a)

// Rainbow gradients are not directly used in the theme, can be kept or removed
rainbow-light = linear-gradient(to right, oklch(0.80 0.10 0), oklch(0.80 0.10 30), oklch(0.80 0.10 60), oklch(0.80 0.10 90), oklch(0.80 0.10 120), oklch(0.80 0.10 150), oklch(0.80 0.10 180), oklch(0.80 0.10 210), oklch(0.80 0.10 240), oklch(0.80 0.10 270), oklch(0.80 0.10 300), oklch(0.80 0.10 330), oklch(0.80 0.10 360))
rainbow-dark = linear-gradient(to right, oklch(0.70 0.10 0), oklch(0.70 0.10 30), oklch(0.70 0.10 60), oklch(0.70 0.10 90), oklch(0.70 0.10 120), oklch(0.70 0.10 150), oklch(0.70 0.10 180), oklch(0.70 0.10 210), oklch(0.70 0.10 240), oklch(0.70 0.10 270), oklch(0.70 0.10 300), oklch(0.70 0.10 330), oklch(0.70 0.10 360))

:root
  --hue: 230 // A cooler, muted blue hue for a literary feel
  --radius-large: 0.375rem // 6px, more refined
  --radius-medium: 0.25rem // 4px
  --radius-small: 0.125rem // 2px, for very subtle rounding like buttons
  --content-delay: 100ms // Slightly faster content load animation

/* An util to define variables that vary with light and dark mode */
define(vars)
  :root
    for key, value in vars
      {key}: value[0]
  :root.dark
    for key, value in vars
      if length(value) > 1
        {key}: value[1]
      else // If no dark mode specific value, use light mode value
        {key}: value[0]


define({
  // Core Colors
  --primary: oklch(0.60 0.12 var(--hue)) oklch(0.65 0.12 var(--hue)) // Primary color, slightly desaturated
  --blockquote-border-color: oklch(0.60 0.12 var(--hue) / 0.7) oklch(0.65 0.12 var(--hue) / 0.7),
  --page-bg: oklch(0.985 0.003 var(--hue)) oklch(0.12 0.008 var(--hue)) // Page background: very light grey / very dark grey
  --card-bg: oklch(1 0 var(--hue)) oklch(0.17 0.01 var(--hue)) // Card background: white / dark grey

  // Text Colors
  --text-color-base: oklch(0.20 0.01 var(--hue)) oklch(0.90 0.005 var(--hue)) // Base text for body
  --text-color-headings: oklch(0.15 0.01 var(--hue)) oklch(0.95 0.003 var(--hue)) // Headings text
  --text-color-novel: oklch(0.25 0.015 var(--hue)) oklch(0.85 0.008 var(--hue)) // Novel content text
  --text-color-novel-headings: oklch(0.20 0.01 var(--hue)) oklch(0.90 0.005 var(--hue)) // Novel chapter/section headings
  --text-color-quote: oklch(0.40 0.02 var(--hue)) oklch(0.70 0.01 var(--hue))
  --deep-text: oklch(0.10 0.01 var(--hue)) oklch(0.98 0.002 var(--hue)) // For very dark/light text if needed

  // Text emphasis (used by .text-xx classes)
  --text-color-medium-emphasis: black(0.70) white(0.75)
  --text-color-low-emphasis: black(0.50) white(0.55)
  --text-color-disabled: black(0.35) white(0.38)

  // Button Colors
  --btn-content: var(--primary) var(--primary) // Button text often uses primary color
  --btn-regular-bg: oklch(0.94 0.01 var(--hue)) oklch(0.25 0.02 var(--hue))
  --btn-regular-bg-hover: oklch(0.90 0.02 var(--hue)) oklch(0.30 0.025 var(--hue))
  --btn-regular-bg-active: oklch(0.87 0.03 var(--hue)) oklch(0.35 0.03 var(--hue))

  --btn-plain-bg-hover: oklch(0.96 0.01 var(--hue)) oklch(0.22 0.015 var(--hue)) // More subtle plain button hover
  --btn-plain-bg-active: oklch(0.93 0.015 var(--hue)) oklch(0.20 0.01 var(--hue))

  --btn-card-bg-hover: oklch(0.97 0.005 var(--hue)) oklch(0.25 0.02 var(--hue))
  --btn-card-bg-active: oklch(0.92 0.02 var(--hue)) oklch(0.28 0.025 var(--hue))

  --enter-btn-bg: var(--btn-regular-bg)
  --enter-btn-bg-hover: var(--btn-regular-bg-hover)
  --enter-btn-bg-active: var(--btn-regular-bg-active)

  // UI Elements
  --title-active: oklch(0.55 0.1 var(--hue)) oklch(0.60 0.1 var(--hue)) // Active title/link color
  --line-divider: black(0.12) white(0.15) // Dividers (e.g. hr)
  --line-color: black(0.15) white(0.20) // General decorative lines
  --meta-divider: black(0.3) white(0.35) // Meta text dividers (e.g. date/category separator)
  --blockquote-bg: oklch(0.96 0.005 var(--hue)) oklch(0.15 0.01 var(--hue)) // Background for blockquotes

  // Code Blocks & Inline Code
  --inline-code-bg: oklch(0.92 0.01 var(--hue)) oklch(0.22 0.015 var(--hue))
  --inline-code-color: oklch(0.45 0.05 var(--hue)) oklch(0.70 0.05 var(--hue))
  --codeblock-bg: oklch(0.94 0.008 var(--hue)) oklch(0.10 0.008 var(--hue)) // Code block background, darker in dark mode
  --codeblock-text: oklch(0.25 0.01 var(--hue)) oklch(0.88 0.005 var(--hue)) // Text color inside code blocks
  --codeblock-selection: oklch(0.85 0.05 var(--hue)) oklch(0.35 0.06 var(--hue)) // Text selection in code blocks

  // Links
  --link-underline: var(--primary) // Underline color for links (can be different)
  // --link-hover: var(--primary) // Hover states handled by opacity or direct color change in CSS
  // --link-active: oklch(0.50 0.1 var(--hue)) oklch(0.55 0.1 var(--hue)) // Active link state

  // Panels & Popups
  --float-panel-bg: oklch(0.99 0.002 var(--hue)) oklch(0.15 0.012 var(--hue)) // Floating panel background
  --selection-bg: oklch(0.88 0.06 var(--hue)) oklch(0.40 0.08 var(--hue)) // Text selection background

  // Scrollbar (values for light and dark mode)
  --scrollbar-bg-light: black(0.3)
  --scrollbar-bg-hover-light: black(0.4)
  --scrollbar-bg-active-light: black(0.5)
  --scrollbar-bg-dark: white(0.25)
  --scrollbar-bg-hover-dark: white(0.35)
  --scrollbar-bg-active-dark: white(0.45)

  --scrollbar-bg: var(--scrollbar-bg-light) var(--scrollbar-bg-dark)
  --scrollbar-bg-hover: var(--scrollbar-bg-hover-light) var(--scrollbar-bg-hover-dark)
  --scrollbar-bg-active: var(--scrollbar-bg-active-light) var(--scrollbar-bg-active-dark)

  // Theme switcher icons (if used)
  --display-light-icon: 1 0
  --display-dark-icon: 0 1

  // Admonitions (Tip, Note, Warning etc.) - colors adjusted for new theme
  --admonitions-color-tip: oklch(0.60 0.12 160) oklch(0.65 0.12 160)      // Teal/Cyan
  --admonitions-color-note: oklch(0.60 0.12 var(--hue)) oklch(0.65 0.12 var(--hue)) // Uses primary hue
  --admonitions-color-important: oklch(0.60 0.12 300) oklch(0.65 0.12 300) // Magenta/Purple
  --admonitions-color-warning: oklch(0.65 0.15 50) oklch(0.70 0.15 50)    // Orange/Yellow
  --admonitions-color-caution: oklch(0.55 0.18 25) oklch(0.60 0.18 25)    // Red

  // Table of Contents (TOC)
  --toc-badge-bg: oklch(0.90 0.03 var(--hue)) var(--btn-regular-bg)
  --toc-btn-hover: oklch(0.92 0.01 var(--hue)) oklch(0.20 0.015 var(--hue))
  --toc-btn-active: oklch(0.90 0.015 var(--hue)) oklch(0.18 0.01 var(--hue))
  --toc-width: calc((100vw - var(--page-width)) / 2 - 1rem) // Assuming --page-width is defined elsewhere
  --toc-item-active: oklch(0.55 0.1 var(--hue)) oklch(0.30 0.05 var(--hue)) // Active TOC item
})

// Fallback for --page-width if not defined by the theme system
:root {
  --page-width: 768px; // Default page width, adjust as needed
  @media (min-width: 1024px) {
    --page-width: 896px;
  }
  @media (min-width: 1280px) {
    --page-width: 1024px;
  }
}
